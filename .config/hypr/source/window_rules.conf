# #################################################################################################
# SECTION 6: WINDOW & WORKSPACE RULES
#
# Defines rules for how specific windows and workspaces should behave (e.g., floating,
# opacity, gaps, borders).
# See: https://wiki.hyprland.org/Configuring/Window-Rules/
# See: https://wiki.hyprland.org/Configuring/Workspace-Rules/
# #################################################################################################

# -------------------------------------------------------------------------------------------------
# 6.1. XWAYLAND SCALING
# -------------------------------------------------------------------------------------------------
xwayland {
  force_zero_scaling = true
}

# -------------------------------------------------------------------------------------------------
# 6.2. WINDOW RULES (windowrule/windowrulev2)
# -------------------------------------------------------------------------------------------------
# --- Floating Windows ---

# Check for Class and title using `hyprctl clients`

#  Window rules: pop‑up dialogs from Firefox as floating overlay
windowrule = float,title:^(About Mozilla Firefox)$
windowrule = float,class:^(firefox)$,title:^(Library)$
windowrule = float,class:^(mpv)$


# Float Steam
windowrule = float, class:steam
windowrule = center, class:steam, title:Steam
windowrule = opacity 1 1, class:steam
windowrule = size 1100 600, class:steam, title:Steam
windowrule = size 460 580, class:steam, title:Friends List
#windowrule = idleinhibit fullscreen, class:steam

# Floating
windowrulev2 = float, class:^(org.gnome.Calculator)$
windowrulev2 = float, class:^(org.gnome.Loupe)$
windowrulev2 = float, class:^(org.gnome.clocks)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(nwg-look)$
windowrulev2 = float, class:^(kvantummanager)$
windowrulev2 = float, class:^(qt6ct)$
windowrulev2 = float, class:^(qt5ct)$
windowrulev2 = float, class:^(steam)$
windowrulev2 = float, class:^(guifetch)$   # FlafyDev/guifetch
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = size 45%, class:^(pavucontrol)$
windowrulev2 = center, class:^(pavucontrol)$
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = size 45%, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 45%, class:^(nm-connection-editor)$
windowrulev2 = center, class:^(nm-connection-editor)$


# --- Picture-in-Picture ---
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = keepaspectratio, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = move 73% 72%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = size 25%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

#NOT dimming picture in picture
windowrulev2 = nodim, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# preventing transparency for picture in pictuer 
windowrulev2 = opaque, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

#Ping picture in picture so it follows you to every workspace.
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# pinned window prevent dimming
windowrulev2 = nodim, pinned:1

# pinned window border color
windowrulev2 = bordercolor rgb(328E6E), pinned:1

# pinned window border size 
windowrulev2 = bordersize 5, pinned:1

# --- General Window Behavior ---
windowrule = suppressevent maximize, class:.* # Prevent apps from maximizing themselves
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0 # Fix XWayland drag issues

# --- Opaque Rules for Specific Applications ---
#windowrulev2 = opaque, class:^(firefox)$
#windowrulev2 = opaque, class:^(obsidian)$

# --- making firefox fully opaque only on the youtube website. ---
windowrulev2 = opacity 1.0 override,title:(.*YouTube.*)$

#----------FULLSCREEN CUSTOMIZATION------------

# FULL SCREEN 1 BORDER COLOR 
windowrulev2 = bordercolor rgb(B3D8A8) rgb(DDA853) 45deg, fullscreen:1

#FULL SCREEN 1 BORDER SIZE (ALL WORKSPACES)
windowrulev2 = bordersize 2, fullscreen:1

#FULL SCREEN ROUNDESS OFF
windowrulev2 = rounding 0, fullscreen:1

# Dialog windows – float+center these windows.
windowrulev2 = center, title:^(Open File)(.*)$
windowrulev2 = center, title:^(Select a File)(.*)$
windowrulev2 = center, title:^(Choose wallpaper)(.*)$
windowrulev2 = center, title:^(Open Folder)(.*)$
windowrulev2 = center, title:^(Save As)(.*)$
windowrulev2 = center, title:^(Library)(.*)$
windowrulev2 = center, title:^(File Upload)(.*)$
windowrulev2 = float, title:^(Open File)(.*)$
windowrulev2 = float, title:^(Select a File)(.*)$
windowrulev2 = float, title:^(Choose wallpaper)(.*)$
windowrulev2 = float, title:^(Open Folder)(.*)$
windowrulev2 = float, title:^(Save As)(.*)$
windowrulev2 = float, title:^(Library)(.*)$
windowrulev2 = float, title:^(File Upload)(.*)$


#common ones
windowrule = float,title:^(Open)$
windowrule = float, title:^(Authentication Required)$
windowrule = float, class:^(org.gnome.FileRoller)$
windowrule = float, title:^(Add Folder to Workspace)$
windowrule = float,initialtitle:^(Open File)$
windowrule = float,title:^(Choose Files)$
windowrule = float,title:^(Save As)$
windowrule = float,title:^(Confirm to replace files)$
windowrule = float,title:^(File Operation Progress)$
windowrule = float,class:^([Xx]dg-desktop-portal-gtk)$
windowrule = float, title:^(File Upload)(.*)$
windowrule = float, title:^(Choose wallpaper)(.*)$
windowrule = float, title:^(Library)(.*)$
windowrule = float,class:^(.*dialog.*)$
windowrule = float,title:^(.*dialog.*)$
# -------------------------------------------------------------------------------------------------
# 6.3. WORKSPACE RULES
# -------------------------------------------------------------------------------------------------


#---------------SPECIAL WORKSPACE: MAGIC----------------------------

# on workspace named “magic”, draw borders of size 8px (WORKS)
workspace = special:magic, bordersize:4, border:true
workspace = special:magic, gapsout:30, gapsin:6 

# --- "Smart Gaps" Rules (No gaps when only one window) ---
# These rules create a "fullscreen" effect for single windows on specific workspaces.
#workspace = w[tv1], gapsout:0, gapsin:0
#windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
#windowrule = rounding 0, floating:0, onworkspace:w[tv1]

#workspace = f[1], gapsout:0, gapsin:0
#windowrule = bordersize 0, floating:0, onworkspace:f[1]
#windowrule = rounding 0, floating:0, onworkspace:f[1]

# -------------------------------------------------------------------------------------------------
# 6.4. MISCELLANEOUS (Previously Commented Out)
# -------------------------------------------------------------------------------------------------
# --- Workspace Autorun (Assign apps to specific workspaces on startup) ---
# exec-once = uwsm-app -- [workspace 1 silent] $terminal
# exec-once = uwsm-app -- [workspace 2 silent] $browser
# exec-once = uwsm-app -- [workspace 3 silent] $fileManager
# exec-once = uwsm-app -- [workspace 4 silent] $textEditor

# --- Example Window Rule ---
# windowrule = float,class:^(kitty)$,title:^(kitty)$
